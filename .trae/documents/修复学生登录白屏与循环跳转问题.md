## 问题分析
- 白屏并伴随循环跳转的根因：学生登录成功后进入 MainActivity 时，默认或上次保存的导航项指向“我的”(ProfileFragment)。ProfileFragment 当前逻辑在 `teacher_id == -1` 时直接 `navigateToLogin()`，导致：
  1) 学生进入 MainActivity → 加载 ProfileFragment → 认为教师信息无效 → 回到 LoginActivity；
  2) LoginActivity 读取 `student_id` 有效 → 再跳 MainActivity；
  3) MainActivity 按保存的导航再次加载 ProfileFragment → 重复上述过程 → 循环卡屏白屏。
- 同类风险：其他只面向教师的 Fragment（如课堂/考勤）若被设为启动导航，也可能触发无效跳转或异常。

## 修复方案（分步执行）
### 第1步：登录后按角色重置首页导航
- 在 LoginActivity 登录成功后：
  - 若 `role=student` → 将 `ui_prefs.nav_selected_id` 重置为 `R.id.nav_home`（或学生专属页）。
  - 若 `role=teacher` → 保持现状或重置为首页。
- 目的：避免学生进入 MainActivity 时加载到教师专用页面。

### 第2步：MainActivity 根据角色校验并修正导航
- 在 MainActivity.onCreate：
  - 读取 `user_role`、`teacher_id`、`student_id`，只要一者有效即可视为已登录；否则回到登录。
  - 读取 `ui_prefs.nav_selected_id`。若 `role=student` 且导航项是教师专用（课堂/考勤/我的），强制改为 `R.id.nav_home`。
  - 先设置默认首页，再调用 `handleNavigation`，确保不会加载到不适配页面。

### 第3步：ProfileFragment 对学生角色降级处理
- 去除 `teacher_id==-1` 时强制跳登录的行为，改为：
  - 若 `role=student`：
    - 显示学生基础信息或提示“当前为学生身份，教师信息不可用”。
    - 禁用/隐藏教师专属操作（修改用户名/头像、更多设置等），但不跳转，不致循环。
  - 若 `role=teacher`：沿用原有逻辑。

### 第4步：防重复跳转与回调
- 保留 LoginActivity 中 `navigated` 标志位，确保动画和直接跳转只触发一次。
- 检查是否存在 `observeForever` 或重复回调导致的再次跳转；确保只 `observe(this, ...)` 并在成功状态后清理必要的监听（如不需要持久观察）。

### 第5步：其他教师专用页面防护（可选）
- 在 MainActivity 的 `handleNavigation` 中，若 `role=student`，拦截选择教师专用项（课堂/考勤/我的），统一跳首页并提示。
- 如有学生专属页面（选课），为学生角色默认展示并允许切换。

## 验证
- 学生登录：不再白屏、不再循环跳转；进入首页。
- 教师登录：行为不变；可进入“我的”等教师页面。
- 切换角色：清理并重置导航项，确保不会记住到不适配页面。

## 变更文件
- `app/src/main/java/com/example/facecheck/ui/auth/LoginActivity.java`：登录成功后按角色写入导航首选项。
- `app/src/main/java/com/example/facecheck/MainActivity.java`：基于角色的登录校验与导航修正；拦截学生选择教师专用项。
- `app/src/main/java/com/example/facecheck/fragments/ProfileFragment.java`：对学生角色降级显示，去除强制跳登录。

## 说明
- 改动遵循最小原则，先消除循环与白屏，再逐步完善学生视图内容。若你希望“我的”页对学生展示个人信息，也可以补充学生信息来源与布局。